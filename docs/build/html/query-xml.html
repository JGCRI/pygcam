

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>queries.xml &mdash; pygcam 0.1a1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="pygcam 0.1a1 documentation" href="index.html"/>
        <link rel="up" title="XML File Formats" href="xmlFiles.html"/>
        <link rel="next" title="rewriteSets.xml" href="rewrites-xml.html"/>
        <link rel="prev" title="scenarios.xml" href="scenarios-xml.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pygcam
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">What is pygcam?</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup.html">GCAM XML-Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration System</a></li>
<li class="toctree-l1"><a class="reference internal" href="gcamtool.html">GCAM tool (<code class="docutils literal"><span class="pre">gt</span></code>)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pygcam.chart.html"><code class="docutils literal"><span class="pre">pygcam.chart</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pygcam.config.html"><code class="docutils literal"><span class="pre">pygcam.config</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pygcam.diff.html"><code class="docutils literal"><span class="pre">pygcam.diff</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pygcam.error.html"><code class="docutils literal"><span class="pre">pygcam.error</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pygcam.gcam.html"><code class="docutils literal"><span class="pre">pygcam.gcam</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pygcam.landProtection.html"><code class="docutils literal"><span class="pre">pygcam.landProtection</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pygcam.log.html"><code class="docutils literal"><span class="pre">pygcam.log</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pygcam.project.html"><code class="docutils literal"><span class="pre">pygcam.project</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pygcam.query.html"><code class="docutils literal"><span class="pre">pygcam.query</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pygcam.setup.html"><code class="docutils literal"><span class="pre">pygcam.setup</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pygcam.subcommand.html"><code class="docutils literal"><span class="pre">pygcam.subcommand</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pygcam.utils.html"><code class="docutils literal"><span class="pre">pygcam.utils</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pygcam.xmlEditor.html"><code class="docutils literal"><span class="pre">pygcam.xmlEditor</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="xmlFiles.html">XML File Formats</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">pygcam</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="xmlFiles.html">XML File Formats</a> &raquo;</li>
      
    <li>queries.xml</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/query-xml.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p id="query-xml">The <code class="docutils literal"><span class="pre">query</span></code> sub-command and the underlying <a class="reference internal" href="pygcam.query.html#pygcam.query.runBatchQuery" title="pygcam.query.runBatchQuery"><code class="xref py py-func docutils literal"><span class="pre">pygcam.query.runBatchQuery()</span></code></a>
function allow you to specify an XML file that describes a sequence of query
to execute. The queries can reference named sets of label rewrite statements that
allow results to be renamed, aggregated, or ignored. Here we document the format of
the two XML files.</p>
<blockquote>
<div><div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See <a class="reference internal" href="pygcam.query.html"><em>pygcam.query</em></a> for more information about run-time behavior.
Command-line usage is described on the <a class="reference internal" href="gcamtool.html#query-label"><em>gt query</em></a> page.</p>
</div>
</div></blockquote>
<div class="section" id="queries-xml">
<h1>queries.xml<a class="headerlink" href="#queries-xml" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">queries.xml</span></code> file defines a set of queries to execute. It&#8217;s elements
are described below, followed by a short example.</p>
<div class="section" id="xml-elements">
<h2>XML elements<a class="headerlink" href="#xml-elements" title="Permalink to this headline">¶</a></h2>
<p>The elements that comprise the <code class="docutils literal"><span class="pre">queries.xml</span></code> file are described below.</p>
<div class="section" id="queries">
<h3>&lt;queries&gt;<a class="headerlink" href="#queries" title="Permalink to this headline">¶</a></h3>
<p>The top-most element, <code class="docutils literal"><span class="pre">&lt;queries&gt;</span></code>, encloses one or more <code class="docutils literal"><span class="pre">&lt;query&gt;</span></code>
elements. The <code class="docutils literal"><span class="pre">&lt;query&gt;</span></code> element takes the following attributes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="26%" />
<col width="24%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Required</th>
<th class="head">Default</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>varName</td>
<td>depends</td>
<td>(none)</td>
<td>text</td>
</tr>
<tr class="row-odd"><td>defaultMap</td>
<td>no</td>
<td>(none)</td>
<td>text</td>
</tr>
<tr class="row-even"><td>delete</td>
<td>no</td>
<td>&#8220;1&#8221;</td>
<td>boolean</td>
</tr>
</tbody>
</table>
<p>The <cite>varName</cite> is required for <code class="docutils literal"><span class="pre">&lt;queries&gt;</span></code> defined in the <code class="docutils literal"><span class="pre">project.xml</span></code> file;
it defines a variable name which is assigned the path of a temporary file
into which the <code class="docutils literal"><span class="pre">&lt;queries&gt;</span></code> element and sub-elements are copied. If an
external queries file is used, the varName is ignored.</p>
<p>The <code class="docutils literal"><span class="pre">defaultMap</span></code> defines a default <a class="reference internal" href="rewrites-xml.html"><em>rewrite set</em></a> to use
with all queries, which can be overridden for any single query by explicitly
specifying <code class="docutils literal"><span class="pre">useDefault=&quot;0&quot;</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">delete</span></code> attribute defines whether the temporary file generated from
the <code class="docutils literal"><span class="pre">&lt;queries&gt;</span></code> element in the project.xml file should be deleted. This
is primarily for debugging.</p>
</div>
<div class="section" id="query">
<h3>&lt;query&gt;<a class="headerlink" href="#query" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;query&gt;</span></code> element specifies a query to run. The required
name attribute must match the name of a query found on the Query
Path, which is specified as an argument to the function
<a class="reference internal" href="pygcam.query.html#pygcam.query.runBatchQuery" title="pygcam.query.runBatchQuery"><code class="xref py py-func docutils literal"><span class="pre">pygcam.query.runBatchQuery()</span></code></a>, on the command-line to the <code class="docutils literal"><span class="pre">query</span></code>
sub-command, or by the value of the config variable <code class="docutils literal"><span class="pre">GCAM.QueryPath</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">&lt;query&gt;</span></code> element can contain zero or more <code class="docutils literal"><span class="pre">&lt;rewriter&gt;</span></code>
elements.</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="26%" />
<col width="24%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Required</th>
<th class="head">Default</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>yes</td>
<td>(none)</td>
<td>text</td>
</tr>
<tr class="row-odd"><td>useDefault</td>
<td>no</td>
<td>&#8220;1&#8221;</td>
<td>boolean</td>
</tr>
</tbody>
</table>
<p>The <cite>useDefault</cite> attribute provides a way to override any
<cite>defaultMap</cite> specified in the surrounding <code class="docutils literal"><span class="pre">&lt;queries&gt;</span></code> element.
Set <code class="docutils literal"><span class="pre">useDefault=&quot;0&quot;</span></code> to prevent the default rewrite map from
applying to this <code class="docutils literal"><span class="pre">&lt;query&gt;</span></code>.</p>
</div>
<div class="section" id="rewriter">
<h3>&lt;rewriter&gt;<a class="headerlink" href="#rewriter" title="Permalink to this headline">¶</a></h3>
<p>This element identifies a <a class="reference internal" href="rewrites-xml.html"><em>rewrite set</em></a> by name.
The rewrite set must be defined in a file identified as an argument
to the <a class="reference internal" href="pygcam.query.html#pygcam.query.runBatchQuery" title="pygcam.query.runBatchQuery"><code class="xref py py-func docutils literal"><span class="pre">pygcam.query.runBatchQuery()</span></code></a>, on the command-line to
the <a class="reference internal" href="gcamtool.html#query-label"><em>query sub-command</em></a>, or by setting a value for
the config variable <code class="docutils literal"><span class="pre">GCAM.RewriteSetsFile</span></code>.</p>
<p>The query named in the <code class="docutils literal"><span class="pre">&lt;query&gt;</span></code> node is extracted into a
temporary file and the specified rewrites are inserted into the
query. If a <code class="docutils literal"><span class="pre">level</span></code> is specified, it identifies the variable
in the query output that should be rewritten according to the
<code class="docutils literal"><span class="pre">&lt;rewrite&gt;</span></code> elements in the corresponding rewrite set.</p>
<p>If no <code class="docutils literal"><span class="pre">level</span></code> is specified, the level giving in the query
definition itself is used. In most cases, the user will not
need to specify a level in the <code class="docutils literal"><span class="pre">&lt;rewriter&gt;</span></code> statement, but
the option is available to override the default.</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="26%" />
<col width="24%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Required</th>
<th class="head">Default</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>yes</td>
<td>(none)</td>
<td>text</td>
</tr>
<tr class="row-odd"><td>level</td>
<td>no</td>
<td>(none)</td>
<td>text</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>This is an example of a query specification file.</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;queries</span> <span class="na">varName=</span><span class="s">&quot;queryXmlFile&quot;</span> <span class="na">defaultMap=</span><span class="s">&quot;eightRegions&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">name=</span><span class="s">&quot;land_cover&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;rewriter</span> <span class="na">name=</span><span class="s">&quot;eightRegions&quot;</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;rewriter</span> <span class="na">name=</span><span class="s">&quot;landCover&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/query&gt;</span>

   <span class="nt">&lt;query</span> <span class="na">name=</span><span class="s">&quot;Aggregated Land Allocation&quot;</span><span class="nt">/&gt;</span>

   <span class="nt">&lt;query</span> <span class="na">name=</span><span class="s">&quot;luc_emissions&quot;</span><span class="nt">/&gt;</span>

   <span class="nt">&lt;query</span> <span class="na">name=</span><span class="s">&quot;ag_production&quot;</span> <span class="na">useDefault=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;rewriter</span> <span class="na">name=</span><span class="s">&quot;GTAP-BIO-ADV&quot;</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;rewriter</span> <span class="na">name=</span><span class="s">&quot;food&quot;</span> <span class="na">level=</span><span class="s">&quot;input&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/query&gt;</span>

   <span class="nt">&lt;query</span> <span class="na">name=</span><span class="s">&quot;nonco2&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">name=</span><span class="s">&quot;Climate_forcing&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">name=</span><span class="s">&quot;Global_mean_temperature&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/queries&gt;</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rewrites-xml.html" class="btn btn-neutral float-right" title="rewriteSets.xml" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="scenarios-xml.html" class="btn btn-neutral" title="scenarios.xml" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Richard Plevin.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1a1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>